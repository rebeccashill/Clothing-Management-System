<!--<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clothing Inventory System</title>

   React 18
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

   Babel for JSX transpiling
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
      color: #333;
      margin: 0;
      padding: 0;
      text-size-adjust: 100%; /* Replace -webkit-text-size-adjust */
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem;
    }
    @media (min-width: 768px) {
      .container {
        padding: 1.5rem;
      }
    }
    h1 {
      text-align: center;
      font-size: 1.875rem;
      font-weight: bold;
      margin-bottom: 1.5rem;
    }
    .total-profit {
      background-color: #e8f0fe;
      padding: 1rem;
      border-radius: 0.5rem;
      text-align: center;
      font-size: 1.25rem;
      font-weight: bold;
      margin-bottom: 1rem;
    }
    .chart-container {
      background-color: #f1f3f5;
      padding: 1rem;
      border-radius: 0.5rem;
      margin-bottom: 1rem;
    }
    .chart-container h3 {
      font-size: 1.125rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    .chart-container canvas {
      max-height: 200px;
      width: 100%;
    }
    .filter-sort-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    .filter-sort-controls div {
      flex: 1;
      min-width: 150px;
    }
    .filter-sort-controls label {
      display: block;
      font-size: 0.875rem;
      font-weight: 500;
      margin-bottom: 0.25rem;
    }
    .filter-sort-controls select {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 0.25rem;
      font-size: 0.875rem;
    }
    .add-button {
      padding: 0.5rem 1rem;
      background-color: #6200ea;
      color: white;
      border: none;
      border-radius: 0.25rem;
      cursor: pointer;
      margin-bottom: 1.5rem;
    }
    .add-button:hover {
      background-color: #4500a0;
    }
    .item-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 1rem;
    }
    .item-card {
      background-color: white;
      padding: 1rem;
      border-radius: 0.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s;
    }
    .item-card:hover {
      transform: translateY(-5px);
    }
    .item-card h3 {
      font-size: 1.125rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    .item-card h4 {
      font-size: 0.875rem;
      color: #6b7280;
      margin-bottom: 0.5rem;
    }
    .item-card p {
      font-size: 0.875rem;
      margin-bottom: 0.75rem;
    }
    .item-card .button-group {
      display: flex;
      gap: 0.5rem;
    }
    .item-card button {
      padding: 0.25rem 0.75rem;
      border: none;
      border-radius: 0.25rem;
      cursor: pointer;
      font-size: 0.875rem;
    }
    .item-card .edit-button {
      background-color: #f59e0b;
      color: white;
    }
    .item-card .edit-button:hover {
      background-color: #d97706;
    }
    .item-card .delete-button {
      background-color: #dc2626;
      color: white;
    }
    .item-card .delete-button:hover {
      background-color: #b91c1c;
    }
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal-content {
      background-color: white;
      padding: 1.5rem;
      border-radius: 0.5rem;
      width: 100%;
      max-width: 500px;
      max-height: 80vh; /* Limit height to 80% of viewport */
      overflow-y: auto; /* Enable vertical scroll */
      box-sizing: border-box;
    }

    .modal-content h2 {
      font-size: 1.25rem;
      font-weight: bold;
      margin-bottom: 1rem;
    }
    .modal-content form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .modal-content label {
      font-size: 0.875rem;
      font-weight: 500;
    }
    .modal-content input,
    .modal-content select {
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 0.25rem;
      font-size: 0.875rem;
    }
    .modal-content button {
      padding: 0.5rem;
      border: none;
      border-radius: 0.25rem;
      cursor: pointer;
      font-size: 0.875rem;
    }
    .modal-content .save-button {
      background-color: #6200ea;
      color: white;
    }
    .modal-content .save-button:hover {
      background-color: #4500a0;
    }
    .modal-content .cancel-button {
      background-color: #6b7280;
      color: white;
    }
    .modal-content .cancel-button:hover {
      background-color: #4b5563;
    }
    body.modal-open {
      overflow: hidden;
    }

  </style>
</head>
<body>
  <div id="root"></div>
    <!-- React 18 production builds from jsDelivr -->
    <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel -->
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.26.3/babel.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>

  <!--<script type="text/babel" data-presets="env,react">
    const API_URL = 'https://resalemanager.onrender.com';
    const originalFetch = window.fetch;

    window.addEventListener("error", (event) => {
    console.error("‚ö†Ô∏è Runtime error caught:", event.error);
  });
  window.addEventListener("unhandledrejection", (event) => {
    console.error("‚ö†Ô∏è Promise rejection:", event.reason);
  });
  console.log("‚úÖ Frontend script executing...");
  console.log("React:", !!window.React);
  console.log("ReactDOM:", !!window.ReactDOM);


    class ErrorBoundary extends React.Component {
      state = { hasError: false, error: null };
      static getDerivedStateFromError(error) {
        return { hasError: true, error };
      }
      render() {
        if (this.state.hasError) {
          return (
            <div>
              <h1>Something went wrong.</h1>
              <p>{this.state.error?.message || 'Unknown error'}</p>
            </div>
          );
        }
        return this.props.children;
      }
    }

    // ProfitChart Component
    function ProfitChart({ data, title, type, colors }) {
      const canvasRef = React.useRef(null);
      React.useEffect(() => {
        const ctx = canvasRef.current.getContext('2d');
        const chart = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: data.map(item => item[type]),
            datasets: [{
              label: `Profit by ${title}`,
              data: data.map(item => item.profit),
              backgroundColor: colors.background,
              borderColor: colors.border,
              borderWidth: 1
            }]
          },
          options: {
            responsive: true,
            scales: {
              y: { beginAtZero: true, title: { display: true, text: 'Profit ($)' } },
              x: { title: { display: true, text: title } }
            }
          }
        });
        return () => chart.destroy();
      }, [data, title, type, colors]);
      return (
        <div className="chart-container">
          <h3>Profit by {title}</h3>
          <canvas ref={canvasRef}></canvas>
        </div>
      );
    }

    // ItemList Component
 function ItemList({ items, onEdit, onDelete }) {
  return (
    <div className="item-grid">
      {items.map(item => {
        // Get latest sale date
        const latestSaleDate =
          item.salesHistory && item.salesHistory.length > 0
            ? item.salesHistory[item.salesHistory.length - 1].date
            : null;

        return (
          <div key={item.name} className="item-card">
            <h3>{item.name}</h3>
            <h4>{item.brand || 'Unknown'}</h4>
            <p>Type: {item.type}</p>
            <p>Platform: {item.platform}</p>
            <p>Likes: {item.likes}</p>
            <p>
              Original Price: $
              {(typeof item.origPrice === 'number' ? item.origPrice : 0).toFixed(2)}
            </p>
            <p>
              Sale Price: $
              {(typeof item.salePrice === 'number' ? item.salePrice : 0).toFixed(2)}
            </p>
            <p>
              Profit/Item: $
              {(typeof item.profitPerItem === 'number' ? item.profitPerItem : 0).toFixed(2)}
            </p>
            <p>
              Total Profit: $
              {(typeof item.totalProfit === 'number' ? item.totalProfit : 0).toFixed(2)}
            </p>
            
            {/* Display latest sale date */}
            {/*<p>Date Sold: {latestSaleDate || '‚Äî'}</p>*/}
            <p>Date Sold:{' '} {latestSaleDate ? new Date(latestSaleDate).toLocaleDateString(): 'Not sold yet'}
            </p>


            {/* Optional: display all sale dates
            {item.salesHistory && item.salesHistory.length > 0 && (
              <div>
                {item.salesHistory.map((sale, idx) => (
                  <p key={idx}>Sale {idx + 1}: {sale.dateSold}</p>
                ))}
              </div>
            )} */}

            <div className="button-group">
              <button type="button" className="edit-button" onClick={() => onEdit(item)}>
                Edit
              </button>
              <button type="button"
                className="delete-button"
                onClick={() => {
                  console.log('Delete button clicked for item:', item.name);
                  onDelete(item);
                }}
              >
                Delete
              </button>
            </div>
          </div>
        );
      })}
    </div>
  );
}


    // ItemForm Component
    function ItemForm({ item, onSave, onCancel }) {
      const [formData, setFormData] = React.useState({
        name: item ? item.name : '',
        type: item ? item.type : '',
        brand: item ? item.brand : '',
        likes: item ? item.likes : 0,
        origPrice: item ? item.origPrice : 0,
        salePrice: item ? item.salePrice : 0,
        quantity: item ? item.quantity : 1,
        sold: item ? item.sold : 0,
        platform: item ? item.platform : '',
        boosted: item ? item.boosted : false,
        dateSold: item ? item.dateSold : ''
      });

      const handleChange = (e) => {
        const { name, value, type, checked } = e.target;
        setFormData(prev => ({
          ...prev,
          [name]: type === 'checkbox' ? checked : name === 'origPrice' || name === 'salePrice' || name === 'likes' || name === 'quantity' || name === 'sold' ? (value === '' ? 0 : Number(value)) : value
        }));
      };

      const handleSubmit = (e) => {
        e.preventDefault();
        const profitPerItem = Number((formData.salePrice - formData.origPrice).toFixed(3));
        const totalProfit = Number((profitPerItem * formData.sold).toFixed(3));
        const itemToSave = {
          ...formData,
          origPrice: Number(formData.origPrice) || 0,
          salePrice: Number(formData.salePrice) || 0,
          quantity: Number(formData.quantity) || 1,
          sold: Number(formData.sold) || 0,
          likes: Number(formData.likes) || 0,
          profitPerItem,
          totalProfit,
          dateSold: formData.dateSold || null,
          salesHistory: item && Array.isArray(item.salesHistory) ? item.salesHistory : []
        };
        console.log('Submitting item:', itemToSave);
        onSave(itemToSave);
      };

    return (
        <div className="modal">
    <div className="modal-content">
      <h2>{item ? 'Edit Item' : 'Add New Item'}</h2>
      <form onSubmit={handleSubmit}>
        <label htmlFor="name">Name</label>
        <input
          id="name"
          name="name"
          value={formData.name}
          onChange={handleChange}
          required
        />

        <label htmlFor="type">Type</label>
        <select
          id="type"
          name="type"
          value={formData.type}
          onChange={handleChange}
          required
        >
          <option value="">Select Type</option>
          <option value="Skirt">Skirt</option>
          <option value="Dress">Dress</option>
          <option value="Sweatshirt">Sweatshirt</option>
          <option value="Bag">Bag</option>
          <option value="Pants">Pants</option>
          <option value="Camisole">Camisole</option>
          <option value="Shirt">Shirt</option>
          <option value="Jacket">Jacket</option>
        </select>

        <label htmlFor="brand">Brand</label>
        <input
          id="brand"
          name="brand"
          value={formData.brand}
          onChange={handleChange}
        />

        <label htmlFor="likes">Likes</label>
        <input
          id="likes"
          name="likes"
          type="number"
          value={formData.likes}
          onChange={handleChange}
          min="0"
        />

        <label htmlFor="origPrice">Original Price</label>
        <input
          id="origPrice"
          name="origPrice"
          type="number"
          step="0.01"
          value={formData.origPrice}
          onChange={handleChange}
          min="0"
          required
        />

        <label htmlFor="salePrice">Sale Price</label>
        <input
          id="salePrice"
          name="salePrice"
          type="number"
          step="0.01"
          value={formData.salePrice}
          onChange={handleChange}
          min="0"
          required
        />

        <label htmlFor="quantity">Quantity</label>
        <input
          id="quantity"
          name="quantity"
          type="number"
          value={formData.quantity}
          onChange={handleChange}
          min="1"
        />

        <label htmlFor="sold">Sold</label>
        <input
          id="sold"
          name="sold"
          type="number"
          value={formData.sold}
          onChange={handleChange}
          min="0"
        />

        <label htmlFor="platform">Platform</label>
        <select
          id="platform"
          name="platform"
          value={formData.platform}
          onChange={handleChange}
          required
        >
          <option value="">Select Platform</option>
          <option value="Depop">Depop</option>
          <option value="Poshmark">Poshmark</option>
          <option value="Other">Other</option>
        </select>

        <label htmlFor="boosted">
          <input
            id="boosted"
            name="boosted"
            type="checkbox"
            checked={formData.boosted}
            onChange={handleChange}
          />
          Boosted
        </label>

        {/* ‚úÖ Date Sold Field */}
        <label htmlFor="dateSold">Date Sold</label>
        <input
          id="dateSold"
          name="dateSold"
          type="date"
          value={formData.dateSold || ''}
          onChange={handleChange}
        />

        <div className="modal-buttons">
          <button type="submit" className="save-button">Save</button>
          <button type="button" className="cancel-button" onClick={onCancel}>Cancel</button>
        </div>
      </form>
    </div>
  </div>
); }

// FilterSortControls Component
function FilterSortControls({ platformFilter, setPlatformFilter, brandFilter, setBrandFilter, sortBy, setSortBy, brands }) {
  return (
    <div className="filter-sort-controls">
      
      {/* Platform Filter */}
      <div>
<label>
  Filter by Platform
  <select
    value={platformFilter}
    onChange={(e) => setPlatformFilter(e.target.value)}
    name="platformFilter"
  >
    <option value="All">All</option>
    <option value="Depop">Depop</option>
    <option value="Poshmark">Poshmark</option>
    <option value="Other">Other</option>
  </select>
</label>
      </div>

      {/* Brand Filter */}
      <div>
        <label htmlFor="brandFilter">Filter by Brand</label>
        <select
          id="brandFilter"
          name="brandFilter"
          value={brandFilter}
          onChange={(e) => setBrandFilter(e.target.value)}
          aria-label="Filter by Brand"
        >
          <option value="All">All</option>
          {brands.map(brand => (
            <option key={brand} value={brand}>{brand}</option>
          ))}
        </select>
      </div>

      {/* Sort By */}
      <div>
        <label htmlFor="sortBy">Sort By</label>
        <select
          id="sortBy"
          name="sortBy"
          value={sortBy}
          onChange={(e) => setSortBy(e.target.value)}
          aria-label="Sort By"
        >
          <option value="name-asc">Name (A-Z)</option>
          <option value="name-desc">Name (Z-A)</option>
          <option value="profit-asc">Profit (Low to High)</option>
          <option value="profit-desc">Profit (High to Low)</option>
          <option value="dateSold-asc">Date Sold (Old to New)</option>
          <option value="dateSold-desc">Date Sold (New to Old)</option>
        </select>
      </div>

    </div>
  );
}

  const { useState, useEffect } = React;

function App() {

  console.log("üëü App() started");
  const [items, setItems] = React.useState([]);
  const [loading, setLoading] = React.useState(true);
  const [error, setError] = React.useState(null);

  React.useEffect(() => {
    console.log("üì° useEffect triggered ‚Äì fetching items...");
  }, []);
  console.log("‚úÖ App component mounted");
  /*const [items, setItems] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);*/
  const [showModal, setShowModal] = useState(false);
  const [editingItem, setEditingItem] = useState(null);
  const [platformFilter, setPlatformFilter] = useState('All');
  const [brandFilter, setBrandFilter] = useState('All');
  const [sortBy, setSortBy] = useState('name-asc');

  // Helper to get latest sale date
  const getLatestSaleDate = (item) => {
    if (!item) return null;
    const sales = item.salesHistory || [];
    const last = sales[sales.length - 1];
    const raw = last?.date ?? last?.dateSold ?? item.dateSold ?? null;
    return raw ? new Date(raw) : null;
  };

  // Load items
  const loadItems = async () => {
    try {
      const res = await fetch(API_URL + '/api/items', { headers: { Accept: 'application/json' } });
      if (!res.ok) throw new Error(`Failed to fetch: ${res.status} ${res.statusText}`);
      const data = await res.json();
      setItems(data.map(item => ({
        ...item,
        totalProfit: Number(item.totalProfit) || 0,
        dateSold: getLatestSaleDate(item) || item.dateSold || null
      })));
      setLoading(false);
    } catch (err) {
      console.error(err);
      setError(err.message);
      setLoading(false);
    }
  };

  // Save or update item
  const handleSave = async (item) => {
    try {
      const method = editingItem ? 'PUT' : 'POST';
      const id = editingItem?._id || editingItem?.name;
      const url = editingItem ? `${API_URL}/api/items/${encodeURIComponent(id)}` : `${API_URL}/api/items`;
      const res = await fetch(url, {
        method,
        headers: { 'Content-Type': 'application/json', Accept: 'application/json' },
        body: JSON.stringify(item)
      });
      if (!res.ok) throw new Error(`Failed to save: ${res.status} ${res.statusText}`);
      const saved = await res.json();

      if (editingItem) {
        setItems(items.map(i => (i._id === editingItem._id ? saved : i)));
      } else {
        setItems([...items, saved]);
      }

      setEditingItem(null);
      setShowModal(false);
    } catch (err) {
      console.error(err);
      alert(err.message);
    }
  };

  // Delete item
  const handleDelete = async (item) => {
    try {
      const id = item._id || item.name;
      const res = await fetch(`${API_URL}/api/items/${encodeURIComponent(id)}`, {
        method: 'DELETE',
        headers: { Accept: 'application/json' }
      });
      if (!res.ok) throw new Error(`Failed to delete: ${res.status} ${res.statusText}`);
      setItems(items.filter(i => (i._id || i.name) !== id));
    } catch (err) {
      console.error(err);
      alert(err.message);
    }
  };

  const handleEdit = (item) => {
    setEditingItem(item);
    setShowModal(true);
  };

  const handleCancel = () => {
    setEditingItem(null);
    setShowModal(false);
  };

  useEffect(() => {
    loadItems();
  }, []);

  useEffect(() => {
    document.body.classList.toggle('modal-open', showModal);
  }, [showModal]);

  if (loading)
    return React.createElement('div', { className: 'loading-message' }, 'Loading inventory...');
  if (error)
    return React.createElement('div', { className: 'error-message' }, 'Error: ' + error);

  // Filter & sort items
  const filteredItems = items
    .filter(
      (item) =>
        (platformFilter === 'All' || item.platform === platformFilter) &&
        (brandFilter === 'All' || item.brand === brandFilter)
    )
    .sort((a, b) => {
      const [field, dir] = sortBy.split('-');
      let valA, valB;
      if (field === 'name') {
        valA = a.name?.toLowerCase();
        valB = b.name?.toLowerCase();
      } else if (field === 'profit') {
        valA = a.totalProfit;
        valB = b.totalProfit;
      } else if (field === 'dateSold') {
        valA = a.dateSold ? new Date(a.dateSold).getTime() : (dir === 'asc' ? Infinity : -Infinity);
        valB = b.dateSold ? new Date(b.dateSold).getTime() : (dir === 'asc' ? Infinity : -Infinity);
      } else {
        valA = a[field];
        valB = b[field];
      }
      return dir === 'asc'
        ? valA < valB
          ? -1
          : valA > valB
          ? 1
          : 0
        : valA > valB
        ? -1
        : valA < valB
        ? 1
        : 0;
    });

  const totalProfit = filteredItems.reduce((sum, i) => sum + (i.totalProfit || 0), 0);

  // ‚úÖ Render
  /*return React.createElement(
    'div',
    { className: 'app-container' },
    React.createElement('h1', null, 'Clothing Inventory'),
    React.createElement('div', null, 'Total Profit: $' + totalProfit.toFixed(2)),

    React.createElement('button', { onClick: () => setShowModal(true) }, 'Add New Item'),

    React.createElement(
      'ul',
      null,
      filteredItems.map((item) =>
        React.createElement(
          'li',
          { key: item._id || item.name },
          `${item.name} - $${item.totalProfit}`,
          ' ',
          React.createElement('button', { onClick: () => handleEdit(item) }, 'Edit'),
          ' ',
          React.createElement('button', { onClick: () => handleDelete(item) }, 'Delete')
        )
      )
    ),

    // ‚úÖ Correct: show full ItemForm when modal is active
    showModal &&
      React.createElement(ItemForm, {
        item: editingItem,
        onSave: handleSave,
        onCancel: handleCancel
      })
  );*/
  return <h1 style={{textAlign: "center"}}>üßæ React App Mounted</h1>;
}


console.log("‚úÖ Frontend script running");


  console.log('Checking for required libraries...');
  if (!window.React || !window.ReactDOM) {
    console.error('Failed to load React or ReactDOM. Check CDN URLs.');
  } else {
    console.log('Rendering React app...');
    const root = ReactDOM.createRoot(document.getElementById('root'));

    // Render App with plain React.createElement
    // If you have an ErrorBoundary function, you can wrap App like this:
    // React.createElement(ErrorBoundary, null, React.createElement(App))

    root.render(
      React.createElement(
        window.ErrorBoundary || React.Fragment, // fallback to Fragment if ErrorBoundary not defined
        null,
        React.createElement(App)
      )
    );
  }
  console.log("‚úÖ Frontend script executing...");
  console.log("React:", !!window.React);
  console.log("ReactDOM:", !!window.ReactDOM);

</script>
<script type="text/babel" data-presets="env,react">
  window.onload = () => {
    console.log("üåê DOM loaded, bootstrapping full React app‚Ä¶");

    const API_URL = "https://resalemanager.onrender.com";

    function App() {
      console.log("üëü App started");
      return <h1>üßæ Clothing Inventory Loaded</h1>;
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  };
</script>

</body>
</html>-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Clothing Inventory System</title>

  <!-- React 18 (CDN, reliable on Render) -->
  <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Babel (for JSX support in-browser) -->
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.26.3/babel.min.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>

  <!-- Your React app -->
  <script type="text/babel" data-presets="env,react" src="./app.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
      color: #333;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    h1 { margin-top: 1rem; }
    .loading-message { margin-top: 2rem; font-size: 1.2rem; }
    .error-message { color: red; margin-top: 2rem; }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- React 18 -->
  <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
  <!-- Babel -->
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.26.3/babel.min.js"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>

  <!-- ‚úÖ Modern UI styles -->
  <style>
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f6f8fa;
      margin: 0;
      padding: 0;
      color: #222;
    }

    h1 {
      text-align: center;
      margin: 1.5rem 0;
      font-weight: 700;
      color: #222;
    }

    .app-container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 1rem;
    }

    .total-profit {
      background-color: #e8f0fe;
      padding: 1rem;
      border-radius: 0.5rem;
      text-align: center;
      font-size: 1.1rem;
      font-weight: 500;
      margin-bottom: 1rem;
      line-height: 1.6;
    }
    .total-profit strong {
      color: #222;
    }


    button {
      cursor: pointer;
      border: none;
      border-radius: 6px;
      padding: 0.5rem 1rem;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .add-button {
      display: block;
      margin: 1rem auto 2rem;
      background: #007bff;
      color: white;
    }

    .add-button:hover {
      background: #0063cc;
    }

    .item-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 1rem;
    }

    .item-card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
      padding: 1rem;
      transition: transform 0.15s ease;
    }

    .item-card:hover {
      transform: translateY(-4px);
    }

    .item-card h3 {
      margin-top: 0;
      font-size: 1.1rem;
    }

    .item-card h4 {
      color: #666;
      font-size: 0.9rem;
      margin-bottom: 0.75rem;
    }

    .item-card p {
      font-size: 0.9rem;
      margin: 0.25rem 0;
    }

    .button-group {
      margin-top: 0.75rem;
      display: flex;
      justify-content: space-between;
    }

    .edit-button {
      background: #ffb300;
      color: white;
    }

    .edit-button:hover {
      background: #e2a000;
    }

    .delete-button {
      background: #dc3545;
      color: white;
    }

    .delete-button:hover {
      background: #b02a37;
    }

    /* Modal Styling */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .modal-content {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      width: 95%;
      max-width: 480px;
      max-height: 85vh;
      overflow-y: auto;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      animation: fadeIn 0.25s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: scale(0.97);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .modal-content h2 {
      margin-top: 0;
      text-align: center;
    }

    .modal-content label {
      font-weight: 500;
      display: block;
      margin-top: 0.75rem;
    }

    .modal-content input,
    .modal-content select {
      width: 100%;
      padding: 0.5rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-top: 0.25rem;
      font-size: 0.9rem;
    }

    .modal-buttons {
      margin-top: 1.5rem;
      display: flex;
      justify-content: space-between;
    }

    .save-button {
      background: #28a745;
      color: white;
    }

    .save-button:hover {
      background: #218838;
    }

    .cancel-button {
      background: #6c757d;
      color: white;
    }

    .cancel-button:hover {
      background: #5a6268;
    }

    .loading-message,
    .error-message {
      text-align: center;
      font-size: 1.2rem;
      margin-top: 2rem;
    }

    .filter-sort-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .filter-sort-controls select {
      width: 100%;
      padding: 0.5rem;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    body.modal-open {
      overflow: hidden;
    }

    /* Chart container */
    .chart-container {
      background: white;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
      margin-bottom: 1.5rem;
    }

    .chart-container h3 {
      text-align: center;
      margin-top: 0;
    }

    canvas {
      width: 100%;
      max-height: 300px;
    }
  </style>

  <!-- ‚úÖ React app with Chart.js -->
  <script type="text/babel" data-presets="env,react" src="./app.js"></script>
</body>
</html>
